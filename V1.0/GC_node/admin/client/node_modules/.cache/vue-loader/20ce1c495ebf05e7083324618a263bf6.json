{"remainingRequest":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\src\\views\\Register.vue?vue&type=style&index=0&id=63ae9146&scoped=true&lang=css&","dependencies":[{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\src\\views\\Register.vue","mtime":1571365862537},{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Worker\\abig_GCGuardBeach\\V1.0\\GC_node\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.login_form {\r\n  width: 30%;\r\n  margin: 5% auto;\r\n  padding-bottom: 50px;\r\n}\r\n.login_form .form {\r\n  position: relative;\r\n  top: 30px;\r\n}\r\n.login_form img {\r\n  width: 80%;\r\n  margin-left: 20px;\r\n}\r\n.login_form_01 {\r\n  font-size: 30px;\r\n  text-align: center;\r\n  margin-block-end: 30px;\r\n  font-family: \"PingFang SC\";\r\n}\r\n",{"version":3,"sources":["Register.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<style scoped>\r\n.login_form {\r\n  width: 30%;\r\n  margin: 5% auto;\r\n  padding-bottom: 50px;\r\n}\r\n.login_form .form {\r\n  position: relative;\r\n  top: 30px;\r\n}\r\n.login_form img {\r\n  width: 80%;\r\n  margin-left: 20px;\r\n}\r\n.login_form_01 {\r\n  font-size: 30px;\r\n  text-align: center;\r\n  margin-block-end: 30px;\r\n  font-family: \"PingFang SC\";\r\n}\r\n</style>>\r\n<template>\r\n  <div class=\"wrap\">\r\n    <Card class=\"login_form\">\r\n      <!-- <div class=\"login_form_01\">登录</div> -->\r\n      <p slot=\"title\">注册</p>\r\n      <img src=\"../assets/logo.png\" />\r\n\r\n      <div class=\"form\">\r\n        <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n          <FormItem label=\"姓名\" prop=\"name\">\r\n            <Input v-model=\"formValidate.name\" placeholder=\"请输入您的姓名\"></Input>\r\n          </FormItem>\r\n          <FormItem label=\"邮箱\" prop=\"mail\">\r\n            <Input v-model=\"formValidate.mail\" placeholder=\"请输入您的邮箱\"></Input>\r\n          </FormItem>\r\n          <FormItem label=\"密码\" prop=\"psw\">\r\n            <Input type=\"password\" v-model=\"formValidate.psw\" placeholder=\"请输入您的密码\"></Input>\r\n          </FormItem>\r\n          <FormItem label=\"确认密码\" prop=\"psw2\">\r\n            <Input type=\"password\" v-model=\"formValidate.psw2\" placeholder=\"请再次输入您的密码\"></Input>\r\n          </FormItem>\r\n          <FormItem>\r\n            <Button type=\"primary\" @click=\"handleSubmit('formValidate')\">注册</Button>\r\n            <Button @click=\"handleRegister('formValidate')\" style=\"margin-left: 80px\">已存在账号</Button>\r\n          </FormItem>\r\n        </Form>\r\n      </div>\r\n    </Card>\r\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n  </div>\r\n</template>\r\n<script>\r\nimport https from \"../https\";\r\n\r\nexport default {\r\n  data() {\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else {\r\n        if (this.formValidate.psw2 !== \"\") {\r\n          this.$refs.formValidate.validateField(\"psw2\");\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    var validatePass2 = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请再次输入密码\"));\r\n      } else if (value !== this.formValidate.psw) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      formValidate: {\r\n        name: \"\",\r\n        mail: \"\",\r\n        psw: \"\",\r\n        psw2: \"\"\r\n      },\r\n      ruleValidate: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        mail: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            type: \"email\",\r\n            message: \"请输入正确邮箱\",\r\n            trigger: \"change\" | \"blur\"\r\n          }\r\n        ],\r\n        psw: [\r\n          {\r\n            required: true,\r\n            message: \"请输入密码\",\r\n            trigger: \"blur\"\r\n          },\r\n          { min: 6, max: 20, message: \"请输入6-20位字符\", trigger: \"blur\" },\r\n          {\r\n            validator: validatePass,\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        psw2: [\r\n          {\r\n            required: true,\r\n            message: \"请再次输入密码\",\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            validator: validatePass2,\r\n            trigger: \"blur\",\r\n            required: true\r\n          }\r\n        ]\r\n      },\r\n      spinShow: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleSubmit(name) {\r\n      this.$refs[name].validate(valid => {\r\n        if (valid) {\r\n          console.log(this.formValidate);\r\n\r\n          let params = {\r\n            name: this.formValidate.name,\r\n            email: this.formValidate.mail,\r\n            password: this.formValidate.psw\r\n          };\r\n          let headers = {\r\n            // \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n          };\r\n          this.spinShow = true;\r\n          try {\r\n            https\r\n              .fetchPost(\"/api/oauthUsers/register\", params, headers)\r\n              .then(data => {\r\n                if (data.data.msg == -1) {\r\n                  this.$Message.error(\"已存在该用户,请登录\");\r\n                  this.spinShow = false;\r\n                } else {\r\n                  this.$Message.success(\"已发到后台审核\");\r\n                  setTimeout(() => {\r\n                    this.$router.push({ path: \"/login\" });\r\n                  }, 1000);\r\n                }\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n              });\r\n          } catch (err) {\r\n            console.log(err);\r\n          }\r\n        } else {\r\n          this.$Message.error(\"按照要求输入\");\r\n        }\r\n      });\r\n    },\r\n    handleRegister(name) {\r\n      this.$router.push({ path: \"/login\" });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}